var distributionLocations = [
  {
    name: "Algeria",
    lat: 36.7528, // Accurate lat for Algiers, Algeria
    lng: 3.042, // Accurate lng for Algiers, Algeria
    company: "EURL GD Trading Company",
    phone: "+213 560 490 955",
    website: "www.gdtrading.dz",
    location:
      "CITE S N 11 BIS 12 ETAGE 03 N 01 BABA HASSEN, ALGER, ALGER, ALGÉRIE",
    mapLocation: "https://maps.app.goo.gl/oogeeT1WfoaLuwCEA",
  },
  {
    name: "Bahrain",
    lat: 26.226, // Accurate lat for Manama, Bahrain
    lng: 50.58, // Accurate lng for Manama, Bahrain
    company: "Modern Food Ingredients",
    phone: "+973 1769 0968",
    website: "www.modbake.com",
    location:
      "BLDG. NO. 9, ROAD NO. 12, MAGABAH BLOCK NO. 509, MANAMA, KINGDOM OF BAHRAIN",
    mapLocation: "https://maps.app.goo.gl/JhLSpghdSiLiP5e98",
  },
  {
    name: "Bangladesh",
    lat: 23.8103, // Accurate lat for Dhaka, Bangladesh
    lng: 90.4125, // Accurate lng for Dhaka, Bangladesh
    company: "Maritime Entrepreneurs (PVT) LTD",
    phone: "+880 2 4108 1314",
    website: "www.meplbd.com",
    location: "PAKUNDA, BALIAPARA, NARAYANGANJ-1430, BANGLADESH",
    mapLocation: "https://maps.app.goo.gl/P9UiGgCCrVMgpgCV9",
  },
  {
    name: "Benin",
    lat: 6.3643, // Accurate lat for Cotonou, Benin
    lng: 2.4216, // Accurate lng for Cotonou, Benin
    company: "YOEL SARL",
    phone: "+229 979 89880",
    website: "",
    location: "ILOT 72, BOKOSSI TOKPA 01 BP 2893 COTONOU, REPUBLIQUE DU BENIN",
    mapLocation: "https://maps.app.goo.gl/AC9rkpy7fU9Fdg8S8",
  },
  {
    name: "Cameroon",
    lat: 3.848, // Accurate lat for Yaoundé, Cameroon
    lng: 11.5021, // Accurate lng for Yaoundé, Cameroon
    company: "Hollandaise Distribution SARL",
    phone: "+237 6 99 42 14 86",
    website: "",
    location:
      "ELIG EDZOA - YAOUNDÉ, PRÈS DU FEICOM OU EN FACE DE LA QUINCAILLERIE",
    mapLocation: "https://maps.app.goo.gl/fWYVShRzdcXxfx7CA",
  },
  {
    name: "Egypt",
    lat: 30.0526, // Accurate lat for Giza, Egypt
    lng: 31.2266, // Accurate lng for Giza, Egypt
    company: "EMKAY Food Company",
    phone: "+2 012 868 88867",
    website: "www.emkay-foods.com",
    location:
      "UNIT 23-24, 2ND FLOOR, MALL 5, BEVERLY HILLS COMPOUND, SHEIKH ZAYED, GIZA, EGYPT",
    mapLocation: "https://maps.app.goo.gl/GkHNdDLDApkDZukKA",
  },
  {
    name: "Ghana",
    lat: 5.5614, // Accurate lat for Accra, Ghana
    lng: -0.2055, // Accurate lng for Accra, Ghana
    company: "Bakers Pantry Company Ltd",
    phone: "+233 56 199 9999",
    website: "www.oriental-ghana.com",
    location: "FAIRWAY MINIMARKET, FIFTH CIRCULAR ROAD, LABONE, ACCRA, GHANA",
    mapLocation: "https://maps.app.goo.gl/mUtGjAQkVTpiWQy77",
  },
  {
    name: "Iraq",
    lat: 33.3152, // Accurate lat for Baghdad, Iraq
    lng: 44.3661, // Accurate lng for Baghdad, Iraq
    company: "Barakat Al-Hani Company for Trade and General Contracting",
    phone: "+964 773 337 8773 / +964 772 223 9966",
    website: "www.barakat-alhani.com",
    location: "ALANSAR MOSQUE STR. 71, JAMILA MARKET, BAGHDAD, IRAQ",
    mapLocation: "https://maps.app.goo.gl/Hvqk7dK6oEGxKUR18",
  },
  {
    name: "Ivory Coast",
    lat: 5.3453, // Accurate lat for Abidjan, Ivory Coast
    lng: -4.0253, // Accurate lng for Abidjan, Ivory Coast
    company: "Bakery Shop Original",
    phone: "+225 09 66 99 99",
    website: "www.bakeryshop-ci.com",
    location: "1614 BP ABIDJAN 13, NCC : 180164 E, RCCM: CI-ABJ-2017-A-27547",
    mapLocation: "https://maps.app.goo.gl/o8urEYDphbd11AjV6",
  },
  {
    name: "Jordan",
    lat: 31.9632, // Accurate lat for Amman, Jordan
    lng: 35.9304, // Accurate lng for Amman, Jordan
    company: "Mahmoud Khader Co. for Trade & Marketing",
    phone: "+962 6 420 0039",
    website: "www.mahmoudkhader-group.com",
    location:
      "ALMOQABLEIN, ALSAKHRA ST., AMMAN, JORDAN, P.O BOX 213067 ZIP CODE 11121",
    mapLocation: "https://maps.app.goo.gl/2mHNy2VpuEFt7m366",
  },
  {
    name: "KSA",
    lat: 21.2854, // Accurate lat for Jeddah, Saudi Arabia
    lng: 39.1851, // Accurate lng for Jeddah, Saudi Arabia
    company: "Cake Decoration Centre",
    phone: "+966 55 501 8394",
    website: "www.cakedecoration.com",
    location: "PRINCE MAJED ROAD, MISHRIFAH, 23335, JEDDAH, SAUDI ARABIA",
    mapLocation: "https://maps.app.goo.gl/enVeefngjm2PWFRK7",
  },
  {
    name: "Kuwait",
    lat: 29.3759, // Accurate lat for Kuwait City, Kuwait
    lng: 47.9774, // Accurate lng for Kuwait City, Kuwait
    company: "Sarya United Company for General Trading & Contracting W.L.L",
    phone: "+965 22 286 998",
    website: "www.saryaunited.com",
    location: "HABEEB MUNAWER ST., FARWANIYA, KUWAIT CITY, KUWAIT",
    mapLocation: "https://maps.app.goo.gl/RunEMwCfA2EC4t7R9",
  },
  {
    name: "Lebanon",
    lat: 33.8547, // Accurate lat for Beirut, Lebanon
    lng: 35.8623, // Accurate lng for Beirut, Lebanon
    company: "Al Halby EST for Trading",
    phone: "+961 5 466 669",
    website: "www.alhalabyest.com",
    location:
      "GROUND FLOOR, SEBAI BLDG, ASSAAD BERBERI STR., HADATH (BAABDA), BEIRUT, LEBANON",
    mapLocation: "https://maps.app.goo.gl/jTbbPRDu5jzxDeLe7",
  },
  {
    name: "Libya",
    lat: 32.8905, // Accurate lat for Tripoli, Libya
    lng: 13.191, // Accurate lng for Tripoli, Libya
    company: "Alalamiya Almutajadida",
    phone: "+218 91 805 6166",
    website: "www.alalamiya.com.tr",
    location:
      "AL-SALMANI AL-SHARQI, NEXT TO THE FURNITURE STORES, TRIPOLI, LIBYA",
    mapLocation: "https://maps.app.goo.gl/n2pUs6Jjmz84jkcKA",
  },
  {
    name: "Malaysia",
    lat: 4.2105,
    lng: 101.9758,
    company: "Q'Zine Gallery Sdn. Bhd",
    phone: "+60 3 9201 4319",
    website: "www.qzinegallery.com",
    location:
      "NO: 1, JALAN CAHAYA 15, TAMAN CAHAYA, 68000 AMPANG, SELANGOR, MALAYSIA",
    mapLocation: "https://maps.app.goo.gl/98ntEbhFwgKDoqwc6",
  },
  {
    name: "Maldives",
    lat: 3.2028,
    lng: 73.2207,
    company: "Raintree Trade Pvt Ltd",
    phone: "+960 333 0001",
    website: "www.raintree.mv",
    location: "MA.AAPIYA, KAAMINEE MAGU 20242, MALE', REPUBLIC OF MALDIVES",
    mapLocation: "https://maps.app.goo.gl/Z5Sc4Vs6iv7bFKy16",
  },
  {
    name: "Nigeria",
    lat: 9.082,
    lng: 8.6753,
    company: "Frozera Food Distribution Limited",
    phone: "+234 80 99 99 5552",
    website: "www.frozera.ng",
    location: "10B LISABI RD, APAPA, LAGOS 102272, LAGOS, NIGERIA",
    mapLocation: "https://maps.app.goo.gl/zjhNf1k898xEQ3797",
  },
  {
    name: "Oman",
    lat: 21.4735,
    lng: 55.9754,
    company: "Catering Solutions Trading",
    phone: "+968 22 060 236",
    website: "www.cst-oman.com",
    location: "P.O. BOX 1177, AZAIBA, GHALA, MASQAT, OMAN",
    mapLocation: "https://maps.app.goo.gl/3m1fswfVDjEXBPho9",
  },
  {
    name: "Pakistan",
    lat: 30.3753,
    lng: 69.3451,
    company: "Venus Pakistan Pvt Ltd",
    phone: "UAN: 111-836-871",
    website: "www.venuspakistan.com",
    location:
      "9/1, K-28, HAWKESBAY ROAD, P.A.F. BASE MASROOR, MAURIPUR, KARACHI 75750, PAKISTAN",
    mapLocation: "https://maps.app.goo.gl/6SAWeAwPBSFxLeAHA",
  },
  {
    name: "Palestine",
    lat: 31.9522,
    lng: 35.2332,
    company: "Backaldrin Holy Land",
    phone: "+970 2 229 2213",
    website: "",
    location: "QEIZOUN STR., P.O. BOX 870, HEBRON, PALESTINE",
    mapLocation: "https://maps.app.goo.gl/Dfa77ohRpAPDZM5B6",
  },
  {
    name: "Palestine",
    lat: 31.9522,
    lng: 34.9,
    company: "M. BADIR MARKETING BAKERY INGREDIENTS LTD",
    phone: "+972 54 769 9116",
    website: "",
    location: "KUFUR-KASSEM, ZIP CODE 48810, PALESTINE",
    mapLocation: "https://maps.app.goo.gl/wYd9seAWtWHTkgKC6",
  },
  {
    name: "Philippines",
    lat: 12.8797,
    lng: 121.774,
    company: "Royal Country Marketing",
    phone: "+63 2 8716 7724",
    website: "",
    location:
      "RM. 309 PACIFIC LAND CENTER, 460 QUINTIN PAREDES ST, BINONDO, MANILA, PHILIPPINES",
    mapLocation: "https://maps.app.goo.gl/z3CWJr78iL8wVWmP9",
  },
  {
    name: "Rwanda",
    lat: -1.9403,
    lng: 29.8739,
    company: "Milimani Enterprise Ltd.",
    phone: "+250 788 760 923",
    website: "www.milimani.rw",
    location: "P.O. BOX 7113, KN 1 RD, KIGALI, RWANDA",
    mapLocation: "https://maps.app.goo.gl/2616tnWqpDDhHcGP9",
  },
  {
    name: "Senegal",
    lat: 14.4974,
    lng: -14.4524,
    company: "MJS Multi Jetables et Services",
    phone: "+221 33 823 06 14",
    website: "",
    location: "28861 115 RUE MARSAT, X BLAISE DIAGNE, DAKAR, SENEGAL",
    mapLocation: "https://maps.app.goo.gl/FcF8HjURhDzbdSFg6",
  },
  {
    name: "Tanzania",
    lat: -6.369,
    lng: 34.8888,
    company: "Hakimi & Co.",
    phone: "+255 765 965 265",
    website: "www.hakimi.co.tz",
    location: "P.O. BOX 22103, OFF JAMAT STR., PWANI, DAR ES SALAAM, TANZANIA",
    mapLocation: "https://maps.app.goo.gl/doxJdzXcYfZqouRq9",
  },
  {
    name: "Tunisia",
    lat: 33.8869,
    lng: 9.5375,
    company: "STE MMC Food Industry",
    phone: "+216 29 727 012",
    website: "",
    location: "ROUTE TUNIS KM 14 4022, AKOUDA, TUNISIA",
    mapLocation: "https://maps.app.goo.gl/aAgt2MnDqKTGXHQ69",
  },
  {
    name: "UAE",
    lat: 25.276987,
    lng: 55.296249,
    company: "Emirates Snack Foods LLC",
    phone: "+971 4 285 5645",
    website: "www.esf-uae.com",
    location: "P.O. BOX 20682, 18 3B STR., UMM RAMOOL, DUBAI, UAE",
    mapLocation: "https://maps.app.goo.gl/6nBV7tm6HvCFktYV6",
  },
  {
    name: "Uganda",
    lat: 1.3733,
    lng: 32.2903,
    company: "Alghanna Import and Export Limited",
    phone: "+256 753 385 127",
    website: "www.alghanna.ug",
    location:
      "WH E16, PLOT 41, SIR APOLO KAGGWA ROAD, P.O. BOX 26109, KAMPALA, UGANDA",
    mapLocation: "https://maps.app.goo.gl/dJwTuEdTFrGvFqBs7",
  },
  {
    name: "Vietnam",
    lat: 14.0583,
    lng: 108.2772,
    company: "SK Foodtech Co. Ltd",
    phone: "+84 28 3726 7320",
    website: "www.skfoodtech.com.vn",
    location:
      "10 ROAD 20, KP4, PHAM VAN DONG, HIEP BINH CHANH, THU DUC DISTR, HOCHIMINH, VIETNAM",
    mapLocation: "https://maps.app.goo.gl/StSpGuNwF2tvYqry5",
  },
  {
    name: "Yemen",
    lat: 15.5527,
    lng: 48.5164,
    company: "Al Shojaa for General Trading",
    phone: "+967 771 812 353",
    website: "www.alshogaatrading.business.site",
    location:
      "P.O. BOX 20877, KHAWLAN STR., ALAHLI FOOTBALL CLUB BLDG, SANA'A, YEMEN",
    mapLocation: "https://maps.app.goo.gl/fBfLdhFdc57hnXcBA",
  },
];

const map = L.map("map").setView([20, 0], 2);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  maxZoom: 19,
}).addTo(map);

var redIcon = L.icon({
  iconUrl:
    "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-icon.png",
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowUrl:
    "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png",
  shadowSize: [41, 41],
  shadowAnchor: [12, 41],
});

var bounds = new L.LatLngBounds();

distributionLocations.forEach(function (location) {
  var marker = L.marker([location.lat, location.lng], { icon: redIcon }).addTo(
    map
  );
  var popupContent = `
<b>${location.name}</b>
<p>    <strong>Company:</strong> ${location.company}</p>
<p>    <strong>Phone:</strong> <a href="tel:${
    location.phone
  }" target="_blank">${location.phone}</a></p>
<p><strong>Website:</strong> ${
    location.website
      ? `<a href="https://${location.website}" target="_blank">${location.website}</a>`
      : "Not Available"
  }</p>
<p>  <strong>Map Location:</strong> <a href="${
    location.mapLocation
  }" target="_blank">View on Map</a></p>

`;
  marker.bindPopup(popupContent);
  bounds.extend(marker.getLatLng());
});
map.fitBounds(bounds);

var style = document.createElement("style");
style.innerHTML = `
  .leaflet-marker-icon {
    filter: hue-rotate(150deg) saturate(5); /* Adjust this to get red color */
  }
`;
document.head.appendChild(style);

const searchCountryForm = document.getElementById("searchCountry");
const searchCountryBtn = document.getElementById("searchCountryBtn");
const searchSelect = document.querySelector("#searchCountry select");
for (let i = 0; i < distributionLocations.length; i++) {
  searchSelect.innerHTML += `<option value="${distributionLocations[i].lat},${distributionLocations[i].lng}">${distributionLocations[i].name}</option>`;
}

searchSelect.addEventListener("input", () => {
  const selectedLocation = searchSelect.value.split(",");
  if (+selectedLocation[0] !== 0 && +selectedLocation[1] !== 0) {
    map.setView([+selectedLocation[0], +selectedLocation[1]], 10);
    const marker = distributionLocations.find(location => 
      location.lat === +selectedLocation[0] && location.lng === +selectedLocation[1]
    );

    if (marker) {
      const popupContent = `
        <b>${marker.name}</b>
        <p><strong>Company:</strong> ${marker.company}</p>
        <p><strong>Phone:</strong> <a href="tel:${marker.phone}" target="_blank">${marker.phone}</a></p>
        <p><strong>Website:</strong> ${marker.website ? `<a href="https://${marker.website}" target="_blank">${marker.website}</a>` : "Not Available"}</p>
        <p><strong>Map Location:</strong> <a href="${marker.mapLocation}" target="_blank">View on Map</a></p>
      `;
      
      const selectedMarker = L.marker([marker.lat, marker.lng], { icon: redIcon }).addTo(map);
      selectedMarker.bindPopup(popupContent).openPopup(); 
    }
  }
});
